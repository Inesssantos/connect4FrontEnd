<div class="row">
  <div class="col-md-8 ml-auto mr-auto">
    <div class="card card-user">
      <form class="form" [formGroup]="personalForm" (ngSubmit)="onSubmitPersonal()">
        <div class="card-header">
          <h5 class="card-title">Personal Data</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6 pr-1">
              <div class="form-group">
                <label>Username</label>
                <input type="text" placeholder="Username..." formControlName="username" class="form-control"
                  [ngClass]="{ 'is-invalid': submitted_personal && access_personalForm.username.errors }" />
                <div *ngIf="submitted_personal && access_personalForm.username.errors" class="invalid-feedback">
                  <div *ngIf="access_personalForm.username.errors.required">Username is required</div>
                </div>
              </div>
            </div>
            <div class="col-md-6 pl-1">
              <div class="form-group">
                <label>Email address</label>
                <input type="text" placeholder="Email..." formControlName="email" class="form-control"
                  [ngClass]="{ 'is-invalid': submitted_personal && access_personalForm.email.errors }" />
                <div *ngIf="submitted_personal && access_personalForm.email.errors" class="invalid-feedback">
                  <div *ngIf="access_personalForm.email.errors.required">Email is required</div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 pr-1">
              <div class="form-group">
                <label>First Name</label>
                <input type="text" placeholder="First Name..." formControlName="firstname" class="form-control"
                  [ngClass]="{ 'is-invalid': submitted_personal && access_personalForm.firstname.errors }" />
                <div *ngIf="submitted_personal && access_personalForm.firstname.errors" class="invalid-feedback">
                  <div *ngIf="access_personalForm.firstname.errors.required">First Name is required</div>
                </div>
              </div>
            </div>
            <div class="col-md-6 pl-1">
              <div class="form-group">
                <label>Last Name</label>
                <input type="text" placeholder="Last Name..." formControlName="lastname" class="form-control"
                  [ngClass]="{ 'is-invalid': submitted_personal && access_personalForm.lastname.errors }" />
                <div *ngIf="submitted_personal && access_personalForm.lastname.errors" class="invalid-feedback">
                  <div *ngIf="access_personalForm.lastname.errors.required">Last Name is required</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card-footer">
          <button [disabled]="loading_personal" class="btn btn-info btn-round btn-block mb-3">
            <span *ngIf="loading_personal" class="spinner-border spinner-border-sm mr-1"></span>
            Update Personal Data
          </button>
          <div *ngIf="error_personal" class="alert alert-danger mt-3 mb-0">{{error_personal}}</div>
        </div>
      </form>
    </div>

    <div class="card">
      <form class="form" [formGroup]="securityForm" (ngSubmit)="onSubmitSecurity()">
        <div class="card-header">
          <h5 class="card-title">Security Data</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6 pr-1">
              <div class="form-group">
                <label>Old Password</label>
                <input type="password" placeholder="Old Password..." formControlName="oldpassword" class="form-control"
                  [ngClass]="{ 'is-invalid': submitted_security && access_securityForm.oldpassword.errors }" />
                <div *ngIf="submitted_security && access_securityForm.oldpassword.errors" class="invalid-feedback">
                  <div *ngIf="access_securityForm.oldpassword.errors.required">Old Password is required</div>
                </div>

              </div>
            </div>
            <div class="col-md-6 pl-1">
              <div class="form-group">
                <label>New Password</label>
                <input #password type="text" placeholder="New Password..." formControlName="newpassword"
                  class="form-control"
                  [ngClass]="{ 'is-invalid': submitted_security && access_securityForm.newpassword.errors }" />
                <div *ngIf="submitted_security && access_securityForm.newpassword.errors" class="invalid-feedback">
                  <div *ngIf="access_securityForm.newpassword.errors.required">New Password is required</div>
                </div>
                <password-strength-bar-cmp [passwordToCheck]="password.value" (strength)="onStrengthChange($event)">
                </password-strength-bar-cmp>
              </div>
            </div>
          </div>
        </div>
        <div class="card-footer">
          <button [disabled]="loading_security" class="btn btn-info btn-round btn-block mb-3">
            <span *ngIf="loading_security" class="spinner-border spinner-border-sm mr-1"></span>
            Update Password
          </button>
          <div *ngIf="error_security" class="alert alert-danger mt-3 mb-0">{{error_security}}</div>
        </div>
      </form>
    </div>

    <div class="col-md-4 ml-auto mr-auto text-center">
      <div class="card">
        <form class="form" [formGroup]="avatarForm" (ngSubmit)="onSubmitAvatar()">
          <div class="card-header">
            <h5 class="card-title">Avatar Image</h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6 ml-auto mr-auto text-center">
                <label for="customFile">Select your avatar photo</label>
                <div class="input-group">
                  <div class="fileinput fileinput-new text-center" data-provides="fileinput">
                    <div class="fileinput-new thumbnail img-circle">
                      <img alt="..." [src]="imageData">
                    </div>
                    <div class="fileinput-preview fileinput-exists thumbnail img-circle"></div>
                    <div>
                      <span class="btn btn-round btn-rose btn-file">
                        <span class="fileinput-new">Add Photo</span>
                        <span class="fileinput-exists">Change</span>
                        <input (change)="onFileSelect($event)" type="file" />
                      </span>
                      <br>
                      <a class="btn btn-danger btn-round fileinput-exists" data-dismiss="fileinput" href=""
                        (click)="onFileRemove()" #remove>
                        <i class="fa fa-times"></i> Remove
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button [disabled]="loading_avatar" class="btn btn-info btn-round btn-block mb-3">
              <span *ngIf="loading_avatar" class="spinner-border spinner-border-sm mr-1"></span>
              Update Avatar
            </button>
            <div *ngIf="error_avatar" class="alert alert-danger mt-3 mb-0">{{error_avatar}}</div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>